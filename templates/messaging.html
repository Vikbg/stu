<div id="messages">
 {% for message in messages %}
     <p><strong>{{ message.sender_name }}:</strong> {{ message.content }}</p>
 {% endfor %}
</div>

<input id="message_input" type="text" placeholder="Type your message...">
<button id="send_button">Send</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.js"></script>
<script>
 const socket = io();
 const sendButton = document.getElementById('send_button');
 const messageInput = document.getElementById('message_input');

 sendButton.addEventListener('click', () => {
     const message = messageInput.value;
     socket.emit('send_message', { sender_id: {{ current_user.id }}, content: message });
     messageInput.value = '';
 });

 socket.on('receive_message', (data) => {
     const messagesDiv = document.getElementById('messages');
     const newMessage = document.createElement('p');
     newMessage.innerHTML = `<strong>${data.sender_name}:</strong> ${data.content}`;
     messagesDiv.appendChild(newMessage);
 });
</script>
